---
import config from 'package.json';
import { Image, getImage } from 'astro:assets';

import Base from '@layouts/Base.astro';
import Card from '@components/Card.astro';
import Badge from '@components/Badge.astro';
import NoteBlock from '@components/NoteBlock.astro';

import headshot from '@images/general/david-weid-headshot-3.jpg';
import imageCat from '@images/games/cat-500.png';

import SvgLayeredWavesHaikei from '@images/general/layered-waves-haikei.svg';
import IconExternalLink from '@images/icons/external-link.svg';
import IconDdWhite from '@images/icons/dd_icon_white.svg';
import IconDdRgb from '@images/icons/dd_icon_purple.svg';

const baseURL = import.meta.env.BASE_URL;
const pageTitle = 'Portfolio Home';

const headshotImage = await getImage({
  src: headshot,
  width: 400,
  height: 400,
  format: 'webp',
});

const heroEyebrow = '<span class="wave">ðŸ‘‹</span>Hi there';
const heroTitle =
  '<span class="text-gradient">David <span class="whitespace-nowrap">Weid II</span></span>';
const heroDescription =
  'An experienced Front-End Web Developer.<br/>A proven communicator and leader.<br/>An optimizer and problem solver.';

const externalLinks = [
  {
    link: 'https://www.linkedin.com/in/david-weid/',
    title: 'LinkedIn Profile',
    description:
      'View my LinkedIn profile for an idea of my professional background.',
    tags: null,
  },
  {
    link: 'https://github.com/DavidWeid/',
    title: 'GitHub Profile',
    description: 'View my GitHub profile for an idea of my code cadences.',
    tags: null,
  },
  {
    link: 'mailto:david.weid.2@gmail.com',
    title: 'Contact Me',
    description: 'Email me directly if that is your preference.',
    tags: null,
  },
];

const internalLinks = [
  {
    link: `${baseURL}cookbook/`,
    title: 'Cookbook',
    description: 'A collection of recipes I have enjoyed.',
    tags: ['recipes', 'food', 'cooking'],
  },
  {
    link: `${baseURL}games/`,
    title: 'Games',
    description: 'Data from the Steam API and other fun content.',
    tags: ['games', 'steam', 'api at build'],
  },
  {
    link: `${baseURL}style/`,
    title: 'Site Style Visualization',
    description: 'A visual representation of the siteâ€™s styles and SVGs',
    tags: ['styles', 'visuals'],
  },
];

const skills = [
  'Javascript',
  'HTML5',
  'CSS',
  'TailwindCSS',
  'AlpineJS',
  'AstroJS',
  'Hugo (SSG)',
  '11ty',
  'Accessibility',
  'SEO',
  'Design Systems',
  'Component Architecture',
  'React',
  'Bootstrap',
  'Materialize',
  'Express.js',
  'SASS',
  'jQuery (+ deprecation)',
  'Node.js',
  'AJAX',
  'WordPress',
  'Wix',
  'Google Analytics',
  'AWS Amplify',
  'Datadog RUM',
  'DatoCMS',
];

const astroVersion = config.dependencies.astro.slice(1);
const tailwindVersion = config.dependencies.tailwindcss.slice(1);
---

<Base title={pageTitle} indexForSearch={false}>
  <div class="dark:bg-medium bg-white">
    <span class="tablet:pb-20 block pb-10"></span>

    <section class="container">
      <div
        class="tablet:flex tablet:justify-center tablet:items-center desktop:items-start tablet:gap-x-14 desktop:gap-x-20 grid grid-cols-1 gap-x-10 gap-y-5"
      >
        <div class="tablet:gap-4 col-span-1 flex flex-col gap-2">
          <span
            set:html={heroEyebrow}
            class="eyebrow-hero font-sans-syne flex gap-1.5"
          />
          <h1 set:html={heroTitle} class="text-gradient" />
          <p
            set:html={heroDescription}
            class="tablet:text-2xl text-lg leading-8"
          />
        </div>

        <div
          class="gradient-border breathe col-span-1 aspect-square w-[400px] max-w-full rounded-2xl before:rounded-2xl"
        >
          <Image
            id="headshot"
            loading="eager"
            fetchpriority="high"
            src={headshotImage.src}
            alt="David Weid II"
            title="David Weid II"
            width={396}
            height={396}
            densities={[1.5, 2, 2.5, 3]}
            class="rounded-2xl"
          />
          <Image
            id="cat-icon"
            src={imageCat}
            alt="Cat"
            loading="lazy"
            width={imageCat.width}
            height={imageCat.height}
            class="hidden rounded-2xl"
          />
        </div>
      </div>
    </section>
    <span class="tablet:pb-20 block pb-10"></span>
    <SvgLayeredWavesHaikei />
  </div>

  <span class="block pb-20"></span>

  <section class="container">
    <div class="tablet:max-w-[85ch] mx-auto">
      <span class="font-sans-syne flex gap-1.5 text-lg"
        ><span class="wave">ðŸ’»</span>Web Developer</span
      >
      <h2 class="text-gradient">Learn more about me</h2>
      <span class="block pb-10"></span>
      <p class="pb-5 text-lg">
        I am proficient in building, maintaining, analyzing, and improving
        complex websites, with a focus on the user, from concept to deployment
        via a variety of Javascript and templating frameworks. I have been
        coding since 2019 and currently work at Datadog, based in New York City.
      </p>

      <p class="text-lg">
        Here are some quick ways to learn more or get in touch:
      </p>
    </div>

    <span class="block pb-10"></span>

    <ul
      class="laptop:max-w-[85ch] laptop:mx-auto tablet:grid-cols-3 grid grid-cols-1 gap-8"
    >
      {
        externalLinks.map((link) => (
          <Card
            href={link.link}
            title={link.title}
            body={link.description}
            tags={link.tags}
          />
        ))
      }
    </ul>

    <span class="block pb-20"></span>

    <div class="tablet:max-w-[85ch] mx-auto">
      <span class="font-sans-syne flex gap-1.5 text-base"
        ><span class="wave">ðŸ’»</span>Front-End</span
      >
      <h3 class="text-gradient">My Coding Skills</h3>
      <p class="pb-10 text-lg">
        Languages, frameworks, technologies. The front-end landscape is
        continuously evolving, and that keeps the internet interesting. Things
        I'm proficient with:
      </p>

      <div class="flex flex-wrap items-center justify-center gap-x-5 gap-y-2.5">
        {
          skills.map((skill) => (
            <Badge
              tag={skill}
              clickable={false}
              variant="large"
              additionalClasses="green-blue-shimmer-slow"
            />
          ))
        }
      </div>
    </div>

    <span class="block pb-20"></span>

    <div class="tablet:max-w-[85ch] mx-auto">
      <span class="font-sans-syne flex items-center gap-1.5 text-base">
        <IconDdWhite id="dd-icon-white" class="hidden h-6 w-6 dark:block" />
        <IconDdRgb id="dd-icon-rgb" class="block h-6 w-6 dark:hidden" />
        Experience
      </span>
      <h3 class="text-gradient">Working at Datadog</h3>
      <div class="flex flex-wrap justify-between pb-8">
        <p class="tablet:text-lg">
          Senior Web Development Engineer (Front-End)
        </p>
        <p class="font-mono text-gray-600 dark:text-gray-300">
          April 2021 â€“ Present
        </p>
      </div>

      <p class="pb-2 text-lg">
        <span class="text-gradient block text-lg font-semibold"
          >Description:</span
        >
        At Datadog, I update, build, and enhance Datadog websites, including <a
          href="https://datadoghq.com/"
          target="_blank"
          rel="noopener noreferrer"
          class="content-link-gradient inline-flex w-fit items-center gap-1 leading-5"
          >datadoghq.com <IconExternalLink class="dark:fill-light h-4 w-4" /></a
        >, <a
          href="https://docs.datadoghq.com/"
          target="_blank"
          rel="noopener noreferrer"
          class="content-link-gradient inline-flex w-fit items-center gap-1 leading-5"
          >docs.datadoghq.com <IconExternalLink
            class="dark:fill-light h-4 w-4"
          /></a
        >, and <a
          href="https://securitylabs.datadoghq.com/"
          target="_blank"
          rel="noopener noreferrer"
          class="content-link-gradient inline-flex w-fit items-center gap-1 leading-5"
          >securitylabs.datadoghq.com <IconExternalLink
            class="dark:fill-light h-4 w-4"
          /></a
        >. Additionally, I develop tools and processes to help facilitate team
        efforts, including replatforming Datadog websites from Bootstrap,
        jQuery, and HugoSSG to TailwindCSS, AstroJS, and DatoCMS.
      </p>
      <p class="text-lg">
        I work closely with Marketing, Brand Design, Community teams and more
        across the company to enhance Datadogâ€™s standing as a monitoring and
        security platform. Some of my favorite interpersonal aspects also
        include onboarding and mentoring new teammates, helping them to
        integrate quickly with both meaningful contributions and an enjoyment of
        their work.
      </p>

      <span class="block pb-20"></span>
      <hr class="border-blue-dark dark:border-green-emerald" />
    </div>
  </section>

  <span class="block pb-20"></span>

  <section class="container">
    <div class="tablet:max-w-[85ch] mx-auto">
      <span class="font-sans-syne flex gap-1.5 text-lg"
        ><span class="wave">ðŸš€</span>Davidâ€™s Place</span
      >
      <h2 class="text-gradient">About this project and website</h2>

      <span class="block pb-10"></span>

      <NoteBlock>
        <div class="desktop:flex-row flex flex-col items-center gap-2">
          <div>
            This website is a side project and playground for me to learn <strong
              >AstroJS</strong
            >, using <strong>TailwindCSS</strong> and other cool CSS/HTML tricks.
            It is hosted on <strong>GitHub Pages</strong> and is a static website
            that makes use of Astro's <strong>View transitions</strong>. It's
            currently using <strong>Astro {astroVersion}</strong> and <strong
              >Tailwind {tailwindVersion}</strong
            >. I hope you find something interesting or even useful here.
          </div>

          <canvas
            id="dotlottie-canvas"
            class="desktop:w-1/12 aspect-square h-fit w-1/4"></canvas>
        </div>
      </NoteBlock>

      <span class="block pb-10"></span>

      <p class="text-lg">
        Currently, Davidâ€™s Place acts as a portfolio and visual representation
        of my resume (everything above if you've made it this far). The most
        robust project on this site is the <strong>Cookbook</strong>. I have
        more I want to build, but itâ€™s fun all the same!
      </p>

      <span class="block pb-10"></span>

      <ul
        class="laptop:max-w-[85ch] laptop:mx-auto tablet:grid-cols-3 grid grid-cols-1 gap-8"
      >
        {
          internalLinks.map((link) => (
            <Card
              href={link.link}
              title={link.title}
              body={link.description}
              tags={link.tags}
            />
          ))
        }
      </ul>
    </div>
  </section>

  <span class="block pb-[200px]"></span>
</Base>

<style>
  .eyebrow-hero {
    font-size: clamp(1.5rem, 2vw, 1.75rem);
  }

  h1 {
    font-size: clamp(3rem, 5vw, 6rem);
  }
</style>

<script>
  const headshot = document.getElementById('headshot');
  const imageCat = document.getElementById('cat-icon');
  let activeFilter = '';
  let counter = 0;
  const filterClasses = [
    'grayscale',
    'saturate-200',
    'brightness-150',
    'hue-rotate-[200deg]',
    'hue-rotate-[300deg]',
    'sepia',
    'invert',
    'contrast-200',
  ];

  const handleClick = () => {
    if (activeFilter) {
      headshot?.classList.remove(activeFilter);
      activeFilter = '';
      counter++;
      return;
    }

    if (counter === 12) {
      headshot?.classList.replace('breathe', 'hidden');
      imageCat?.classList.replace('hidden', 'breathe');
    }

    const randomFilter =
      filterClasses[Math.floor(Math.random() * filterClasses.length)];
    headshot?.classList.add(randomFilter);
    activeFilter = randomFilter;
    counter++;
  };

  headshot?.removeEventListener('click', handleClick);
  headshot?.addEventListener('click', handleClick);
</script>

<script>
  import { DotLottie } from '@lottiefiles/dotlottie-web';

  document.addEventListener('astro:page-load', () => {
    const dotLottieCanvas = document.querySelector(
      '#dotlottie-canvas',
    ) as HTMLCanvasElement;

    if (!dotLottieCanvas) {
      return;
    }

    const dotLottie = new DotLottie({
      autoplay: true,
      loop: true,
      canvas: dotLottieCanvas,
      src: 'https://lottie.host/67761132-c9e4-43d4-b17f-04e416915d3d/BMXQKoVtaQ.json',
    });
  });
</script>
